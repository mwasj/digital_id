<div ng-controller="NewHostCtrl">
    <div class="jumbotron" style="margin-top: 20px">
        <p class="pull-left">{{$parent.headerTitle}}</p>
    </div>

    <div>

        <div id="actions_pane">

            <div ng-repeat="action in $parent.actions">
                <div class="action"
                        type="button"
                        ng-model="action"
                        ng-click="selectAction(action)"
                        ng-class="{selected_action_background: $parent.selectedAction.webId === action.webId, non_selected_action_background: $parent.selectedAction.webId != action.webId}">{{action.name}}



                        <div class="percentage">
                            {{action.percentageCompleted}}%
                            <div class="spinner" ng-show="action.percentageCompleted != 100 && action.actionStatus === 'Executing'">
                                <div class="rect1"></div>
                                <div class="rect2"></div>
                                <div class="rect3"></div>
                                <div class="rect4"></div>
                                <div class="rect5"></div>
                            </div>

                            <div class="isa_success" ng-show="action.actionStatus === 'Pass'" class="margin-bottom: 10px">
                                <i class="fa fa-check"></i>
                                OK
                            </div>

                            <div class="isa_error" ng-show="action.actionStatus === 'Fail'" class="margin-bottom: 10px">
                                <i class="fa fa-times-circle"></i>
                                Fail
                            </div>
                        </div>
                </div>
            </div>

        </div>

        <div id="commands_pane" class="selected_action_commands">

            <accordion>
                <accordion-group ng-repeat="command in $parent.selectedAction.commands" heading="{{command.displayName}}">
                    <accordion-heading>
                        {{command.displayName}}

                        <div class="spinner" ng-show="command.commandStatus === 'Executing'" class="margin-bottom: 10px">
                            <div class="rect1"></div>
                            <div class="rect2"></div>
                            <div class="rect3"></div>
                            <div class="rect4"></div>
                            <div class="rect5"></div>
                        </div>

                        <div class="isa_success" ng-show="command.commandStatus === 'Pass'" class="margin-bottom: 10px">
                            <i class="fa fa-check"></i>
                            OK
                        </div>

                        <div class="isa_error" ng-show="command.commandStatus === 'Fail'" class="margin-bottom: 10px">
                            <i class="fa fa-times-circle"></i>
                            Fail
                        </div>

                    </accordion-heading>

                    <pre>{{command.data}}</pre>
                </accordion-group>
            </accordion>
        </div>
    </div>

    <button class="btn btn-sm btn-danger" id="btn_cancel" ng-click="$parent.cancel()">{{$parent.downloadReady ? 'Close' : 'Cancel'}}</button>
    <a href="/digitalid/download/{{$parent.downloadUrl}}.xml" class="btn btn-sm btn-success" ng-disabled="!$parent.downloadReady" target="_blank">Download XML file</a>
</div>